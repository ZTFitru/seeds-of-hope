# Enable mod_rewrite
<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Disable directory browsing
  Options -Indexes
  
  # Disable automatic trailing slash addition
  DirectorySlash Off
  
  # Strip trailing slashes internally (except root) before processing
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} ^(.+)/$
  RewriteRule ^(.+)/$ /$1 [L]
  
  # Auto-add .html extension to requests without file extensions
  # Skip if the request is for an actual file or directory
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  # Check if the request doesn't already have a file extension
  RewriteCond %{REQUEST_URI} !\.[^/]*$
  # Add .html extension
  RewriteRule ^(.*)$ /$1.html [L]
  
  # Handle root index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^$ /index.html [QSA,L]
</IfModule>

# Allow direct access to files (CSS, JS, images, etc.)
<FilesMatch "\.(html|css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|eot)$">
  Header append Cache-Control "public"
</FilesMatch>
